<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Professor Details Page</title>
</head>
<body>

<div class="d-flex">
  <!-- Sidebar -->
  <div class="sidebar p-3">
    <h4 class="mb-4">Dashboard</h4>
    <ul class="nav flex-column">
      <li class="nav-item"><a class="nav-link" href="#">Students</a></li>
      <li class="nav-item"><a class="nav-link" href="#">Classes</a></li>
      <li class="nav-item"><a class="nav-link" href="#">Attendance</a></li>
      <li class="nav-item"><a class="nav-link" href="#">Reports</a></li>
    </ul>
  </div>

  <!-- Main Content -->
  <main class="container-fluid p-4">
    <!-- Top Bar -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Welcome, Admin</h2>
      <div>
       <!-- Top Bar Right Side -->
       <div class="dropdown">
        <button class="btn btn-light dropdown-toggle" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          ðŸ‘¤ Profile
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li><a class="dropdown-item">View Profile</a></li>
          <li><a class="dropdown-item">Settings</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item text-danger" [routerLink]="['/home']">Logout</a></li>
        </ul>
      </div>
      </div>
    </div>

    <!-- Dashboard Cards -->
    <div class="row mb-4">
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Total Students</h5>
          <h2>{{ allStudents.length }}</h2>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Active Classes</h5>
          <h2>12</h2>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card p-3">
          <h5>Today's Attendance</h5>
          <h2>89%</h2>
        </div>
      </div>
    </div>

    <!-- Professor Details Table -->
     <!-- main-professor-details-page.component.html -->
      <div class="card p-3">
        <h4 class="mb-4">Student List</h4>
        <p-table
          #dt1
          [value]="allStudents"
          dataKey="student_id"
          [paginator]="true"
          [rows]="10"
          [rowsPerPageOptions]="[10,25,50]"
          [globalFilterFields]="[
            'student_id',
            'first_name',
            'last_name',
            'email',
            'gender',
            'date_of_birth',
            'address',
            'phone_number'
          ]"
          [responsiveLayout]="'scroll'"
          [loading]="loading"
          styleClass="white-table"
          sortMode="single" 
        >

          <!-- CAPTION: Global Search + Clear -->
          <ng-template pTemplate="caption">
            <div class="table-header flex justify-content-between">
              <span class="p-input-icon-left" style="gap: 0.5rem; padding: 0.5rem;">
                <i class="pi pi-search" style="flex: 1; margin-right: 0.5rem;"></i>
                <input
                  #globalFilter
                  pInputText
                  type="text"
                  (input)="dt1.filterGlobal(globalFilter.value, 'contains')"
                  placeholder="Global Search"
                />
              </span>

              <p-button
                icon="pi pi-filter-slash"
                label="Clear"
                class="p-button-outlined"
                (click)="clear(dt1)"
                [style]="{'position': 'absolute'}"
              ></p-button>
            </div>
          </ng-template>

          <!-- HEADER: Titles + Sort Icons -->
          <ng-template pTemplate="header">
            <tr>
              <th scope="col" pSortableColumn="student_id">
                ID <p-sortIcon field="student_id"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="first_name">
                First Name <p-sortIcon field="first_name"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="last_name">
                Last Name <p-sortIcon field="last_name"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="email">
                Email <p-sortIcon field="email"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="gender">
                Gender <p-sortIcon field="gender"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="date_of_birth">
                DOB <p-sortIcon field="date_of_birth"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="address">
                Address <p-sortIcon field="address"></p-sortIcon>
              </th>
              <th scope="col" pSortableColumn="phone_number">
                Phone <p-sortIcon field="phone_number"></p-sortIcon>
              </th>
            </tr>

            <!-- FILTER ROW -->
            <tr>
              <!-- Text filter -->
              <th>
                <input
                  #idFilter
                  pInputText
                  type="text"
                  (input)="dt1?.filter(idFilter.value, 'student_id', 'contains')"
                  placeholder="Search ID"
                  class="p-column-filter"
                />
              </th>

              <th>
                <input
                  #firstFilter
                  pInputText
                  type="text"
                  (input)="dt1?.filter(firstFilter.value, 'first_name', 'contains')"
                  placeholder="Search First"
                  class="p-column-filter"
                />
              </th>

              <th>
                <input
                  #lastFilter
                  pInputText
                  type="text"
                  (input)="dt1?.filter(lastFilter.value, 'last_name', 'contains')"
                  placeholder="Search Last"
                  class="p-column-filter"
                />
              </th>

              <th>
                <input
                #emailFilter
                pInputText
                type="text"
                (input)="dt1?.filter(emailFilter.value, 'email', 'contains')"
                placeholder="Search Email"
                class="p-column-filter"
                />
              </th>

              <!-- Dropdown filter -->
              <th>
                <p-dropdown
                  [options]="[
                    { label: 'Male', value: 'male' },
                    { label: 'Female', value: 'female' }
                  ]"
                  placeholder="All"
                  [showClear]="true"
                  (onChange)="dt1.filter($event.value, 'gender', 'equals')"
                  class="p-column-filter"
                ></p-dropdown>
              </th>

              <!-- Date range filter -->
              <th>
                <p-calendar
                  selectionMode="range"
                  dateFormat="mm/dd/yy"
                  placeholder="Date Range"
                  showIcon="true"
                  (onSelect)="dt1.filter($event, 'date_of_birth', 'between')"
                  class="p-column-filter"
                ></p-calendar>
              </th>

              <th>
                <input
                  #addrFilter
                  pInputText
                  type="text"
                  (input)="dt1?.filter(addrFilter.value, 'address', 'contains')"
                  placeholder="Search Address"
                  class="p-column-filter"
                />
              </th>

              <th>
                <input
                  #phoneFilter
                  pInputText
                  type="text"
                  (input)="dt1?.filter(phoneFilter.value, 'phone_number', 'contains')"
                  placeholder="Search Phone"
                  class="p-column-filter"
                />
              </th>
            </tr>
          </ng-template>

          <!-- BODY -->
          <ng-template pTemplate="body" let-student>
            <tr>
              <td>{{ student.student_id }}</td>
              <td>{{ student.first_name }}</td>
              <td>{{ student.last_name }}</td>
              <td>{{ student.email }}</td>
              <td>{{ student.gender }}</td>
              <td>{{ student.date_of_birth | date: 'MM/dd/yyyy' }}</td>
              <td>{{ student.address }}</td>
              <td>{{ student.phone_number }}</td>
            </tr>
          </ng-template>

          <!-- EMPTY MESSAGE -->
          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="8">No students found.</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
  </main>
</div>

<!-- Footer -->
<footer class="bg-light text-center py-3 mt-auto">
  <p class="mb-0">Â© 2025 Student Management System</p>
</footer>
</body>
</html>
